{% assign rom = site.data.roms[page.rom] %}
{% assign device = site.data.devices[page.device] %}
{% assign roms = "" | split: " " %}
{% for rom in site.data.roms %}
{% assign roms = roms | push: rom[1] %}
{% endfor %}



{% if rom.codename = device.rom_list %}{% assign romName = rom.rom_name | append: ' ' | append: rom.name %}
{% else %}{% assign romName = rom.name %}{% endif %}
{% assign class="discontinued" %}

<table class="table device">
  <thead>
  <tr>
    <th scope="col" class="first"><b>Rom</b></th>
    <th scope="col"><b>Codename</b></th>
    <th scope="col" class="last"><b>Type</b></th>
  </tr>
  </thead>



  <tr class="{{ class }}">
    <th scope="row" onClick="location.href='{{ rom.rom_url }}'"><a href="{{ rom.rom_url }}">{{ romName }}</a></th>
    <td onClick="location.href='{{ rom.rom_url }}'"><a href="{{ rom.rom_url }}">{{ rom.codename }}</a></td>
    <td>{{ rom.type | capitalize }}</td>


        <td>
            {%- if device.rom_list.first.size == 1 %}
                {%- for model in device.rom_list %}
                <ul>
                    <li>{{ model.first[0] }}
                        {% assign rom_list = model.first[1] %}
                        {% include snippets/peripherals.html %}
                    </li>
                </ul>
                {%- endfor %}
            {%- else %}
                {%- assign rom_list = device.rom_list %}
                {%- include snippets/peripherals.html %}
            {%- endif %}
        </td>
</table>
</table>
